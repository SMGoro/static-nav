# 数据管理功能说明

## 概述

数据管理模块提供了完整的网站数据管理功能，包括浏览器收藏夹导入导出、批量管理、数据备份恢复和分享等功能。

## 主要功能

### 1. 浏览器收藏夹管理

#### 导入收藏夹
- **支持格式**: HTML格式的收藏夹文件
- **支持浏览器**: Chrome、Firefox、Safari、Edge等主流浏览器
- **功能特点**:
  - 自动解析文件夹结构并转换为标签
  - 保留原始添加时间
  - 自动获取网站图标
  - 默认添加"书签导入"标签

#### 导出收藏夹
- **导出格式**: 标准HTML收藏夹格式
- **兼容性**: 可导入到任何支持HTML收藏夹的浏览器
- **功能特点**:
  - 按标签分组导出
  - 保留网站图标和添加时间
  - 生成标准的Netscape书签格式

### 2. 批量管理

#### 网站列表管理
- **分页显示**: 每页20个网站，支持翻页浏览
- **搜索过滤**: 支持按标题、描述、URL搜索
- **标签过滤**: 按标签筛选网站
- **批量选择**: 支持全选/取消全选

#### 编辑功能
- **单个编辑**: 直接在列表中编辑网站信息
- **批量编辑**: 同时修改多个网站的标签、精选状态、描述
- **快速操作**: 一键切换精选状态

#### 批量操作
- **批量删除**: 删除选中的多个网站
- **批量导出**: 导出选中网站的数据
- **批量标签管理**: 为选中网站添加标签

### 3. 数据导入导出

#### JSON格式数据
- **导出**: 将网站数据导出为JSON格式
- **导入**: 从JSON文件导入数据（合并模式）
- **版本控制**: 支持数据版本管理

#### 数据备份
- **完整备份**: 包含所有网站、标签和关系数据
- **增量导入**: 导入时自动合并，避免重复
- **数据验证**: 导入前验证数据格式

### 4. 分享功能

#### 创建分享
- **分享链接**: 生成包含数据的分享链接
- **过期设置**: 支持1天、7天、30天或永不过期
- **分享说明**: 可添加分享描述信息
- **自动复制**: 分享链接自动复制到剪贴板

#### 导入分享
- **链接导入**: 支持完整分享链接或分享ID
- **数据合并**: 导入的数据会合并到现有数据
- **重复检测**: 自动检测并处理重复数据

## 使用指南

### 导入浏览器收藏夹

1. **导出收藏夹**:
   - Chrome: 设置 → 书签 → 书签管理器 → 整理 → 导出书签
   - Firefox: 书签 → 管理所有书签 → 导入和备份 → 导出书签为HTML
   - Safari: 文件 → 导出书签
   - Edge: 设置 → 收藏夹 → 导出收藏夹

2. **导入到系统**:
   - 进入数据管理页面
   - 点击"导入浏览器收藏夹"
   - 选择导出的HTML文件
   - 预览导入内容
   - 确认导入

### 批量管理网站

1. **进入批量管理**:
   - 在数据管理页面选择"批量管理"标签
   - 使用搜索和过滤功能找到目标网站

2. **选择网站**:
   - 单击复选框选择单个网站
   - 使用"全选当前页"快速选择

3. **执行操作**:
   - 点击"批量编辑"修改选中网站
   - 使用"导出选中"备份特定网站
   - 点击"删除选中"移除不需要的网站

### 数据备份与恢复

1. **备份数据**:
   - 在"导入导出"标签页点击"导出数据"
   - 系统会下载JSON格式的备份文件

2. **恢复数据**:
   - 点击"导入数据"选择备份文件
   - 系统会自动合并数据，保留现有内容

### 分享数据

1. **创建分享**:
   - 在"分享管理"标签页设置分享参数
   - 点击"创建分享链接"
   - 链接会自动复制到剪贴板

2. **导入分享**:
   - 在"导入分享数据"区域粘贴分享链接
   - 点击"导入"按钮
   - 系统会合并分享的数据

## 技术实现

### 收藏夹解析器 (`bookmarkParser.ts`)
- 使用DOMParser解析HTML收藏夹文件
- 递归处理文件夹结构
- 自动生成网站图标和标签
- 支持导出为标准HTML格式

### 批量管理组件 (`BatchWebsiteManager.tsx`)
- 分页显示和搜索过滤
- 内联编辑和批量操作
- 响应式设计，支持移动端

### 导入对话框 (`BookmarkImportDialog.tsx`)
- 文件上传和进度显示
- 数据预览和确认机制
- 错误处理和用户提示

## 注意事项

1. **数据安全**: 所有数据都存储在本地浏览器中，不会上传到服务器
2. **文件大小**: 大型收藏夹文件可能需要较长处理时间
3. **浏览器兼容**: 建议使用现代浏览器以获得最佳体验
4. **数据备份**: 建议定期导出数据进行备份
5. **分享安全**: 分享链接包含您的数据，请谨慎分享给信任的人

## 常见问题

**Q: 导入收藏夹后网站图标显示不正确？**
A: 系统会自动获取网站图标，如果原收藏夹中没有图标数据，会使用Google的图标服务。

**Q: 批量操作后如何撤销？**
A: 系统不支持撤销操作，建议在重要操作前先导出备份。

**Q: 分享链接有大小限制吗？**
A: 分享链接使用base64编码，大量数据可能导致链接过长，建议分批分享。

**Q: 如何处理重复的网站？**
A: 系统会基于URL和标题检测重复，导入时会提示重复项，您可以选择跳过或替换。
